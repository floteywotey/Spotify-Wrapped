{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Your Wrapped</title>
    <link rel="stylesheet" href="{% static 'SpotifyWrapped/duo_results.css' %}">
</head>
<body>
<div class="header">
    <form class="home" action="{% url 'home' %}" method="post">
        {% csrf_token %}
        <button class="home-button" aria-label="Home" title="Home">
            <img src="{% static 'SpotifyWrapped/images/icons/close_presentation.svg' %}" height="30px" width="30px">
        </button>
    </form>
</div>
<div class="cards">
   <div id="card-container">
       <div id="card" class="card">Original Card</div>
    </div>
</div>
    <script>
       document.addEventListener("DOMContentLoaded", () => {
  const originalCard = document.getElementById("card");
  const container = document.getElementById("card-container");
  let isAnimating = false; // Flag to track if animation is in progress

  originalCard.addEventListener("click", () => {
    if (isAnimating) return; // If animation is running, ignore click

    isAnimating = true; // Set flag to true to prevent rapid clicks

    // Step 1: Animate the original card to split into left and right cards
    originalCard.style.opacity = "0"; // Hide the original card during animation

    // Create and add the split cards
    const card1 = document.createElement("div");
    card1.classList.add("card", "split-card", "info1");
    card1.textContent = "Info 1";

    const card2 = document.createElement("div");
    card2.classList.add("card", "split-card", "info2");
    card2.textContent = "Info 2";

    // Add split cards to container
    container.appendChild(card1);
    container.appendChild(card2);

    // Step 2: Make the cards appear with a delay for smooth effect
    setTimeout(() => {
      card1.classList.add("show");
      card2.classList.add("show");
    }, 50); // Small delay to ensure the cards are added to DOM

    // Step 3: Apply the split animation (left and right) to the cards
    setTimeout(() => {
      card1.classList.add("split-left");
      card2.classList.add("split-right");

      // After the split, recombine the cards
      setTimeout(() => {
        // Apply recombine animations
        card1.classList.add("recombine-left");
        card2.classList.add("recombine-right");

        // After recombination, remove the split cards and show the original card again
        setTimeout(() => {
          card1.remove(); // Remove left card
          card2.remove(); // Remove right card
          originalCard.style.opacity = "1"; // Show the original card again
          isAnimating = false; // Reset the flag, allow new click
        }, 1500); // Wait for recombine animation to finish
      }, 1000); // Wait a moment after split before starting recombine
    }, 1000); // Wait before starting the split animation
  });
});

    </script>
</body>
</html>